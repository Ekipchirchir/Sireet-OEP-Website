<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Farmer Portal for Sireet OEP - Login to access resources, track deliveries, and more." />
  <meta name="keywords" content="Sireet OEP, tea farmers, Nandi Hills, farmer portal, login, sustainability" />
  <meta name="author" content="Sireet OEP" />
  <title>Login - Sireet OEP</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2Lw==" crossorigin="anonymous" />
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
  <style>
    :root {
      --sireet-green: #2c7a44;
      --sireet-orange: #f5a623;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      scroll-behavior: smooth;
      overflow-x: hidden;
      line-height: 1.6;
      background: #f4f7f6;
    }

    .navbar {
      background-color: #ffffff;
      transition: background-color 0.3s ease;
    }

    .navbar.scrolled {
      background-color: rgba(255, 255, 255, 0.95);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .navbar-brand img {
      height: 60px;
      transition: transform 0.3s ease;
    }

    .navbar-brand img:hover {
      transform: scale(1.1);
    }

    .nav-link {
      color: #333 !important;
      font-weight: 500;
      transition: color 0.3s ease;
      padding: 10px 15px;
    }

    .nav-link:hover {
      color: var(--sireet-orange) !important;
    }

    .btn-sireet {
      background-color: var(--sireet-green);
      color: white;
      border-radius: 8px;
      padding: 12px 24px;
      transition: all 0.3s ease;
      font-weight: 500;
      position: relative;
      overflow: hidden;
    }

    .btn-sireet:hover {
      background-color: var(--sireet-orange);
      color: white;
    }

    .btn-sireet:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    .btn-sireet .spinner-border {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: none;
    }

    .btn-sireet.loading .spinner-border {
      display: inline-block;
    }

    .btn-sireet.loading span {
      visibility: hidden;
    }

    .login-container {
      max-width: 420px;
      margin: 5% auto;
      background: white;
      border-radius: 10px;
      padding: 30px;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.05);
      text-align: center;
    }

    .logo {
      width: 80px;
      margin-bottom: 20px;
    }

    .form-control {
      border-radius: 8px;
      border: 1px solid #ced4da;
      padding: 12px;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .form-control:focus {
      border-color: var(--sireet-green);
      box-shadow: 0 0 8px rgba(44, 122, 68, 0.3);
    }

    .form-label {
      font-weight: 500;
      color: #333;
      margin-bottom: 8px;
    }

    .error-message {
      color: #dc3545;
      font-size: 14px;
      margin-top: 8px;
      background-color: #f8d7da;
      padding: 5px 10px;
      border-radius: 5px;
      display: none;
    }

    .success-message {
      color: var(--sireet-green);
      font-size: 14px;
      margin-top: 8px;
      background-color: #d4edda;
      padding: 5px 10px;
      border-radius: 5px;
      display: none;
    }

    .forgot-password {
      color: var(--sireet-orange);
      font-size: 14px;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .forgot-password:hover {
      color: var(--sireet-green);
    }

    .language-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
    }

    .language-toggle select {
      padding: 5px 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 14px;
      background-color: #fff;
      cursor: pointer;
      transition: border-color 0.3s ease;
    }

    .language-toggle select:focus {
      border-color: var(--sireet-green);
      outline: none;
    }

    .modal-content {
      border-radius: 10px;
    }

    .modal-header {
      background-color: var(--sireet-green);
      color: white;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
    }

    .modal-footer .btn-secondary {
      background-color: #6c757d;
      border: none;
    }

    .modal-footer .btn-primary {
      background-color: var(--sireet-green);
      border: none;
    }

    .modal-footer .btn-primary:hover {
      background-color: var(--sireet-orange);
    }

    footer {
      background-color: #f8f9fa;
      padding: 50px 0;
      text-align: center;
      border-top: 5px solid var(--sireet-green);
    }

    .footer-links a {
      color: #333;
      margin: 0 15px;
      text-decoration: none;
      transition: color 0.3s ease;
      font-weight: 500;
    }

    .footer-links a:hover {
      color: var(--sireet-orange);
    }

    .social-icons a {
      color: #333;
      font-size: 1.5rem;
      margin: 0 10px;
      transition: color 0.3s ease;
    }

    .social-icons a:hover {
      color: var(--sireet-orange);
    }

    .chat-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: var(--sireet-green);
      color: white;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      transition: background-color 0.3s ease, transform 0.3s ease;
    }

    .chat-btn:hover {
      background-color: var(--sireet-orange);
      transform: translateY(-5px);
    }

    .password-toggle {
      position: relative;
    }

    .password-toggle .toggle-icon {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      cursor: pointer;
      color: #666;
    }

    .password-toggle .toggle-icon:hover {
      color: var(--sireet-green);
    }

    @media (max-width: 768px) {
      .login-container {
        margin: 10% auto;
        padding: 20px;
        max-width: 90%;
      }

      .navbar-brand img {
        height: 50px;
      }

      .language-toggle {
        top: 10px;
        right: 10px;
      }

      .btn-sireet {
        padding: 10px 20px;
      }
    }
  </style>
</head>
<body>


<div class="language-toggle">
  <select id="languageSelect" onchange="changeLanguage()">
    <option value="en" selected>English</option>
    <option value="sw">Kiswahili</option>
  </select>
</div>

<div class="login-container" data-aos="fade-up">
  <img src="logo.png" class="logo" alt="Sireet OEP Logo">
  <h4 class="mb-4" id="loginTitle">Login to Your Account</h4>
  <form id="loginForm">
    <div class="mb-3 text-start">
      <label for="username" class="form-label" id="usernameLabel">Username or Farmer ID</label>
      <input type="text" class="form-control" id="username" placeholder="Enter your username or Farmer ID" aria-label="Username or Farmer ID" aria-describedby="usernameError" required />
      <div id="usernameError" class="error-message">Username must be 3-20 characters long and contain only letters, numbers, or underscores.</div>
    </div>
    <div class="mb-3 text-start">
      <label for="password" class="form-label" id="passwordLabel">PIN / Password</label>
      <div class="password-toggle">
        <input type="password" class="form-control" id="password" placeholder="Enter your PIN or password" aria-label="PIN or Password" aria-describedby="passwordError" required />
        <i class="fas fa-eye toggle-icon" id="togglePassword" aria-label="Show password"></i>
      </div>
      <div id="passwordError" class="error-message">Password must be 6-20 characters long and include at least one number and one letter.</div>
    </div>
    <div class="d-grid">
      <button type="button" class="btn btn-sireet" id="loginButton" onclick="submitLoginForm()">
        <span id="loginButtonText">Login</span>
        <div class="spinner-border spinner-border-sm" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </button>
    </div>
    <div id="loginError" class="error-message text-center mt-3">Invalid username or password.</div>
  </form>
  <p class="mt-3"><a href="#" class="forgot-password" data-bs-toggle="modal" data-bs-target="#forgotPasswordModal" id="forgotPasswordLink">Forgot PIN?</a></p>
</div>

<div class="modal fade" id="forgotPasswordModal" tabindex="-1" aria-labelledby="forgotPasswordModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="forgotPasswordModalLabel">Reset Password</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="resetPasswordForm">
          <div class="mb-3">
            <label for="resetEmail" class="form-label" id="resetEmailLabel">Email Address</label>
            <input type="email" class="form-control" id="resetEmail" placeholder="Enter your email" aria-label="Email Address" aria-describedby="resetEmailError" required />
            <div id="resetEmailError" class="error-message">Please enter a valid email address.</div>
            <div id="resetEmailSuccess" class="success-message">Password reset link sent successfully!</div>
          </div>
        </form>
        <p id="resetInstruction">A password reset link will be sent to your email.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="modalCloseButton">Close</button>
        <button type="button" class="btn btn-primary" id="modalSubmitButton" onclick="submitResetPassword()">Send Reset Link</button>
      </div>
    </div>
  </div>
</div>

<a href="https://wa.me/+254123456789" class="chat-btn" target="_blank"><i class="fab fa-whatsapp"></i></a>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
  AOS.init({ duration: 1000, once: true });

  window.addEventListener('scroll', function () {
    const navbar = document.querySelector('.navbar');
    if (window.scrollY > 50) {
      navbar.classList.add('scrolled');
    } else {
      navbar.classList.remove('scrolled');
    }
  });

  const translations = {
    en: {
      loginTitle: 'Login to Your Account',
      usernameLabel: 'Username or Farmer ID',
      usernamePlaceholder: 'Enter your username or Farmer ID',
      passwordLabel: 'PIN / Password',
      passwordPlaceholder: 'Enter your PIN or password',
      forgotPasswordLink: 'Forgot PIN?',
      loginButtonText: 'Login',
      usernameError: 'Username must be 3-20 characters long and contain only letters, numbers, or underscores.',
      passwordError: 'Password must be 6-20 characters long and include at least one number and one letter.',
      loginError: 'Invalid username or password.',
      resetPasswordTitle: 'Reset Password',
      resetEmailLabel: 'Email Address',
      resetEmailPlaceholder: 'Enter your email',
      resetInstruction: 'A password reset link will be sent to your email.',
      resetEmailError: 'Please enter a valid email address.',
      resetEmailSuccess: 'Password reset link sent successfully!',
      modalCloseButton: 'Close',
      modalSubmitButton: 'Send Reset Link'
    },
    sw: {
      loginTitle: 'Ingia kwenye Akaunti Yako',
      usernameLabel: 'Jina la Mtumiaji au Kitambulisho cha Mkulima',
      usernamePlaceholder: 'Ingiza jina lako la mtumiaji au Kitambulisho cha Mkulima',
      passwordLabel: 'PIN / Nenosiri',
      passwordPlaceholder: 'Ingiza PIN au nenosiri lako',
      forgotPasswordLink: 'Umesahau PIN?',
      loginButtonText: 'Ingia',
      usernameError: 'Jina la mtumiaji lazima liwe na herufi 3-20 na liwe na herufi, namba, au alama za chini pekee.',
      passwordError: 'Nenosiri lazima liwe na herufi 6-20 na liwe na angalau namba moja na herufi moja.',
      loginError: 'Jina la mtumiaji au nenosiri si sahihi.',
      resetPasswordTitle: 'Weka Upya Nenosiri',
      resetEmailLabel: 'Anwani ya Barua Pepe',
      resetEmailPlaceholder: 'Ingiza barua pepe yako',
      resetInstruction: 'Kiungo cha kuweka upya nenosiri kitatumwa kwenye barua pepe yako.',
      resetEmailError: 'Tafadhali ingiza anwani ya barua pepe sahihi.',
      resetEmailSuccess: 'Kiungo cha kuweka upya nenosiri kimetumwa kwa mafanikio!',
      modalCloseButton: 'Funga',
      modalSubmitButton: 'Tuma Kiungo cha Kuweka Upya'
    }
  };

  function changeLanguage() {
    const lang = document.getElementById('languageSelect').value;
    const texts = translations[lang];

    document.getElementById('loginTitle').textContent = texts.loginTitle;
    document.getElementById('usernameLabel').textContent = texts.usernameLabel;
    document.getElementById('username').placeholder = texts.usernamePlaceholder;
    document.getElementById('passwordLabel').textContent = texts.passwordLabel;
    document.getElementById('password').placeholder = texts.passwordPlaceholder;
    document.getElementById('forgotPasswordLink').textContent = texts.forgotPasswordLink;
    document.getElementById('loginButtonText').textContent = texts.loginButtonText;
    document.getElementById('usernameError').textContent = texts.usernameError;
    document.getElementById('passwordError').textContent = texts.passwordError;
    document.getElementById('loginError').textContent = texts.loginError;
    document.getElementById('forgotPasswordModalLabel').textContent = texts.resetPasswordTitle;
    document.getElementById('resetEmailLabel').textContent = texts.resetEmailLabel;
    document.getElementById('resetEmail').placeholder = texts.resetEmailPlaceholder;
    document.getElementById('resetInstruction').textContent = texts.resetInstruction;
    document.getElementById('resetEmailError').textContent = texts.resetEmailError;
    document.getElementById('resetEmailSuccess').textContent = texts.resetEmailSuccess;
    document.getElementById('modalCloseButton').textContent = texts.modalCloseButton;
    document.getElementById('modalSubmitButton').textContent = texts.modalSubmitButton;
  }

  document.getElementById('togglePassword').addEventListener('click', function () {
    const passwordInput = document.getElementById('password');
    const icon = this;
    if (passwordInput.type === 'password') {
      passwordInput.type = 'text';
      icon.classList.remove('fa-eye');
      icon.classList.add('fa-eye-slash');
      icon.setAttribute('aria-label', 'Hide password');
    } else {
      passwordInput.type = 'password';
      icon.classList.remove('fa-eye-slash');
      icon.classList.add('fa-eye');
      icon.setAttribute('aria-label', 'Show password');
    }
  });

  function submitLoginForm() {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();
    const usernameError = document.getElementById('usernameError');
    const passwordError = document.getElementById('passwordError');
    const loginError = document.getElementById('loginError');
    const loginButton = document.getElementById('loginButton');
    const usernameRegex = /^[a-zA-Z0-9_]{3,20}$/;
    const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,20}$/;

    let isValid = true;

    usernameError.style.display = 'none';
    passwordError.style.display = 'none';
    loginError.style.display = 'none';

    if (!usernameRegex.test(username)) {
      usernameError.style.display = 'block';
      isValid = false;
    }

    if (!passwordRegex.test(password)) {
      passwordError.style.display = 'block';
      isValid = false;
    }

    if (isValid) {
      loginButton.disabled = true;
      loginButton.classList.add('loading');

      setTimeout(() => {
        if (username === 'farmer123' && password === 'password123') {
          alert('Login successful! Redirecting to your dashboard...');
          window.location.href = 'dashboard.html';
        } else {
          loginError.style.display = 'block';
        }
        loginButton.disabled = false;
        loginButton.classList.remove('loading');
      }, 1500);
    }
  }

  function submitResetPassword() {
    const email = document.getElementById('resetEmail').value.trim();
    const resetEmailError = document.getElementById('resetEmailError');
    const resetEmailSuccess = document.getElementById('resetEmailSuccess');
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    const modalSubmitButton = document.getElementById('modalSubmitButton');

    resetEmailError.style.display = 'none';
    resetEmailSuccess.style.display = 'none';

    if (!email || !emailRegex.test(email)) {
      resetEmailError.style.display = 'block';
    } else {
      modalSubmitButton.disabled = true;
      modalSubmitButton.innerHTML = '<span>Sending...</span><div class="spinner-border spinner-border-sm" role="status"><span class="visually-hidden">Loading...</span></div>';

      setTimeout(() => {
        resetEmailSuccess.style.display = 'block';
        document.getElementById('resetEmail').value = '';
        modalSubmitButton.disabled = false;
        modalSubmitButton.innerHTML = translations[document.getElementById('languageSelect').value].modalSubmitButton;

        setTimeout(() => {
          const modal = bootstrap.Modal.getInstance(document.getElementById('forgotPasswordModal'));
          modal.hide();
        }, 2000);
      }, 1500);
    }
  }

  document.getElementById('loginForm').addEventListener('keypress', function (e) {
    if (e.key === 'Enter') {
      submitLoginForm();
    }
  });

  document.getElementById('resetPasswordForm').addEventListener('keypress', function (e) {
    if (e.key === 'Enter') {
      submitResetPassword();
    }
  });
</script>
</body>
</html>